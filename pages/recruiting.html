<!DOCTYPE html>
<html lang="it">
<head>
<meta charset="UTF-8">
<title>Reclutamento – Blackjack</title>
<link rel="stylesheet" href="../css/style.css">
</head>

<body class="page-transition">

<header>
  <nav class="mainnav">
    <ul>
      <li><a href="../index.html">Home</a></li>
      <li><a href="raider.html">Raider</a></li>
      <li><a href="hollowsoul.html">Hollow Soul</a></li>
      <li><a href="recruiting.html" class="active">Reclutamento</a></li>
      <li><a href="statuto.html">Statuto</a></li>
    </ul>
  </nav>
</header>

<!-- HERO -->
<section class="hero">
  <div class="hero-content">
    <h2>Reclutamento</h2>
    <p>
      Vuoi entrare nei Blackjack?  
      Compila il modulo e ti ricontatteremo direttamente su Discord.
    </p>
  </div>
</section>

<!-- BG LOGO + OVERLAY -->
<div class="bg-container bg-main-logo">

  <main class="panel recruit">

    <h2 class="section-title">Come candidarsi</h2>
    <p class="section-subtitle">
      Inserisci i tuoi dati nel modulo qui sotto.  
      Il nostro staff ti risponderà appena possibile.
    </p>

    <!-- FORM -->
    <form id="applyForm" class="apply-form">

      <label>Discord</label>
      <input type="text" name="Discord" placeholder="es: Odetti#1234" required>

      <label>Nome del personaggio</label>
      <input type="text" name="Personaggio" placeholder="Il tuo personaggio principale" required>

      <label>Classe</label>
      <select id="classSelect" name="Classe" required>
        <option value="">Seleziona la classe…</option>
        <option>Death Knight</option>
        <option>Demon Hunter</option>
        <option>Druid</option>
        <option>Evoker</option>
        <option>Hunter</option>
        <option>Mage</option>
        <option>Monk</option>
        <option>Paladin</option>
        <option>Priest</option>
        <option>Rogue</option>
        <option>Shaman</option>
        <option>Warlock</option>
        <option>Warrior</option>
      </select>

      <label>Specializzazione</label>
      <select id="specSelect" name="Spec" required>
        <option value="">Seleziona prima una classe…</option>
      </select>

      <label>Link a Raider.IO o Warcraft Logs</label>
      <input type="text" name="Logs" placeholder="URL al tuo profilo (opzionale)">

      <label>Disponibilità</label>
      <textarea name="Disponibilità" placeholder="Giorni/Orari disponibili per raid e attività" required></textarea>

      <label>Perché vuoi unirti ai Blackjack?</label>
      <textarea name="Motivazione" placeholder="Dicci qualcosa di te e delle tue aspettative" required></textarea>

      <button type="submit" class="apply-button">Invia candidatura</button>

    </form>

  </main>
</div>

<footer>
  <p>&copy; 2025 Blackjack</p>
</footer>

<!-- TRANSIZIONE PAGINE -->
<script>
document.addEventListener("DOMContentLoaded", function () {
  document.body.classList.add("page-loaded");
});
document.querySelectorAll("a").forEach(link => {
  if (link.hostname === window.location.hostname) {
    link.addEventListener("click", function (e) {
      e.preventDefault();
      const href = this.getAttribute("href");
      document.body.classList.remove("page-loaded");
      setTimeout(() => { window.location.href = href; }, 300);
    });
  }
});
</script>

<!-- INVIO FORM AL WEBHOOK DISCORD -->
<script>
document.getElementById("applyForm").addEventListener("submit", async function(e) {
  e.preventDefault();

  const webhookURL = "https://discord.com/api/webhooks/1439257704198832194/KIM82-eZUORCNmAYRBTZwjatEASiltvNvZ-0hAvp2_bjUw_BB0kTPo3ITRJDz-RisJnM";

  const formData = new FormData(this);

  const message = Array.from(formData.entries())
    .map(([key, value]) => `**${key}:** ${value}`)
    .join("\n");

  await fetch(webhookURL, {
    method: "POST",
    headers: { "Content-Type": "application/json" },
    body: JSON.stringify({ content: message })
  });

  alert("Candidatura inviata con successo!");
  this.reset();
});
</script>

<!-- POPOLAMENTO SPEC IN BASE ALLA CLASSE -->
<script>
const specByClass = {
  "Death Knight": ["Blood", "Frost", "Unholy"],
  "Demon Hunter": ["Havoc", "Vengeance"],
  "Druid": ["Balance", "Feral", "Guardian", "Restoration"],
  "Evoker": ["Devastation", "Preservation", "Augmentation"],
  "Hunter": ["Beast Mastery", "Marksmanship", "Survival"],
  "Mage": ["Arcane", "Fire", "Frost"],
  "Monk": ["Brewmaster", "Mistweaver", "Windwalker"],
  "Paladin": ["Holy", "Protection", "Retribution"],
  "Priest": ["Discipline", "Holy", "Shadow"],
  "Rogue": ["Assassination", "Outlaw", "Subtlety"],
  "Shaman": ["Elemental", "Enhancement", "Restoration"],
  "Warlock": ["Affliction", "Demonology", "Destruction"],
  "Warrior": ["Arms", "Fury", "Protection"]
};

const classSelect = document.getElementById("classSelect");
const specSelect = document.getElementById("specSelect");

classSelect.addEventListener("change", () => {
  specSelect.innerHTML = "";
  const selectedClass = classSelect.value;

  if (!selectedClass) {
    specSelect.innerHTML = `<option value="">Seleziona prima una classe…</option>`;
    return;
  }

  specByClass[selectedClass].forEach(spec => {
    const op = document.createElement("option");
    op.value = op.textContent = spec;
    specSelect.appendChild(op);
  });
});
</script>

</body>
</html>
