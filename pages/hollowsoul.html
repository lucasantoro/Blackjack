<!DOCTYPE html>
<html lang="it">
<head>
<meta charset="UTF-8">
<title>Blackjack – Spettatori</title>
<link rel="stylesheet" href="../css/style.css">
<link rel="icon" href="data:;base64,iVBORw0KGgo=">
</head>

<body class="page-transition blackjack-bg">

<header>
  <nav class="mainnav">
    <ul>
      <li><a href="../index.html">Home</a></li>
      <li><a href="raider.html">Raider</a></li>
      <li><a href="hollowsoul.html" class="active">Spettatori</a></li>
      <li><a href="recruiting.html">Reclutamento</a></li>
      <li><a href="statuto.html">Statuto</a></li>
    </ul>
  </nav>
</header>

<nav class="subnav">
  <ul>
    <li><a href="hollowsoul.html" class="active">Community</a></li>
    <li><a href="hollowsoul-video.html">Video divertenti</a></li>
    <li><a href="hollowsoul-eventi.html">Eventi di gilda</a></li>
  </ul>
</nav>

<!-- HERO -->
<section class="hero">
  <div class="hero-content">
    <h2>Spettatori</h2>
    <p>
      La parte sociale dei Blackjack: chi riempie il Discord, crea gruppi al volo
      e trasforma ogni serata in una compagnia vera.
    </p>
  </div>
</section>

<!-- BACKGROUND CON LOGO -->
<div class="bg-container bg-main-logo">
  <main class="panel">

    <!-- COMMUNITY -->
    <h2 class="section-title">La nostra community</h2>
    <p class="section-subtitle">
      Gli Spettatori sono la voce più libera e creativa della gilda:
      qui contano le persone, la presenza e il piacere di giocare insieme.
    </p>

    <p class="description-long">
      Gli <strong>Spettatori</strong> rappresentano l’anima quotidiana della gilda. Sono i giocatori
      che tengono viva la community con chiacchiere, Mythic+, alt run, PvP improvvisato,
      eventi interni e supporto ai nuovi arrivati. È il posto giusto per chi vuole vivere WoW
      in modo rilassato ma con un gruppo vero al fianco.
    </p>

    <!-- COSA FACCIAMO -->
    <section>
      <h2 class="section-title">Cosa facciamo</h2>
      <p class="section-subtitle">
        Attività leggere ma curate: gioco sociale, eventi interni e compagnia costante.
      </p>

      <div class="grid-cards">
        <div class="card">
          <h3>Mythic+ senza stress</h3>
          <p>
            Key in compagnia, clima tranquillo e un ritmo adatto a tutti.
            Qui si impara e ci si diverte.
          </p>
        </div>

        <div class="card">
          <h3>Alt, collezionismo e farming</h3>
          <p>
            Mount, transmog, vecchi raid e achievement: sempre qualcuno con cui condividere un obiettivo.
          </p>
        </div>

        <div class="card">
          <h3>Eventi social e community</h3>
          <p>
            Serate chill, giochi interni e nottate in chat.
            Gli Spettatori sono il cuore pulsante della gilda.
          </p>
          <a href="recruiting.html" class="team-btn">Unisciti agli Spettatori</a>
        </div>
      </div>
    </section>

    <!-- STATISTICHE WORKER -->
    <section>
      <h2 class="section-title">Numeri della community</h2>
      <p class="section-subtitle">
        Un’istantanea dei nostri dati social e Mythic+ aggiornati tramite Worker e Raider.IO.
      </p>

      <div class="stats-grid">

        <div class="stat-card">
          <div class="stat-label">Personaggi in gilda</div>
          <div class="stat-value" id="stat-characters">–</div>
          <div class="stat-hint">Totale dei personaggi presenti nel roster.</div>
        </div>

        <div class="stat-card">
          <div class="stat-label">Giocatori attivi M+ (30 giorni)</div>
          <div class="stat-value" id="stat-active">–</div>
          <div class="stat-hint">Player che hanno completato almeno una Mythic+ nell’ultimo mese.</div>
        </div>

        <div class="stat-card">
          <div class="stat-label">Punteggio medio M+ (Top 10)</div>
          <div class="stat-value" id="stat-avg-score">–</div>
          <div class="stat-hint">Media del punteggio Mythic+ dei top 10 player.</div>
        </div>

        <div class="stat-card">
          <div class="stat-label">Punteggio medio M+ (Top 30)</div>
          <div class="stat-value" id="stat-avg-top30">–</div>
          <div class="stat-hint">Media del punteggio Mythic+ dei migliori 30 giocatori della gilda.</div>
        </div>

        <div class="stat-card">
          <div class="stat-label">Run M+ (ultimi 30 giorni)</div>
          <div class="stat-value" id="stat-guild-runs">–</div>
          <div class="stat-hint">Totale delle Mythic+ completate dai membri della gilda.</div>
        </div>

      </div>

      <p class="stats-note" id="stats-note">
        Dati aggiornati automaticamente.
      </p>
    </section>

  </main>
</div>

<footer>
  <p>&copy; 2025 Blackjack</p>
</footer>

<!-- TRANSIZIONE PAGINE -->
<script>
document.addEventListener("DOMContentLoaded", () => {
  document.body.classList.add("page-loaded");
});
document.querySelectorAll("a").forEach(a => {
  if (a.hostname === location.hostname) {
    a.addEventListener("click", e => {
      e.preventDefault();
      const href = a.getAttribute("href");
      document.body.classList.remove("page-loaded");
      setTimeout(() => { window.location = href; }, 300);
    });
  }
});
</script>

<!-- WORKER STATS -->
<script>
async function loadHollowSoulStats() {
  const elChars  = document.getElementById("stat-characters");
  const elActive = document.getElementById("stat-active");
  const elAvg10  = document.getElementById("stat-avg-score");
  const elAvg30  = document.getElementById("stat-avg-top30");
  const elRuns   = document.getElementById("stat-guild-runs");
  const note     = document.getElementById("stats-note");

  try {
    const res = await fetch("https://hollow-stats-api.lucasantoro2905.workers.dev");
    const data = await res.json();

    elChars.textContent = data.totalCharacters ?? "–";
    elActive.textContent = data.activePlayersLast30 ?? "–";
    elAvg10.textContent = data.avgScoreTop10 ?? "–";
    elAvg30.textContent = data.avgScoreTop30 ?? "–";
    elRuns.textContent = data.guildRunsLast30 ?? "–";

    note.textContent =
      "Statistiche aggiornate via Worker ogni 6 ore.";

  } catch (e) {
    console.error("Errore stats:", e);
    elChars.textContent = elActive.textContent = elAvg10.textContent = elAvg30.textContent = elRuns.textContent = "–";
    note.textContent = "Impossibile caricare le statistiche al momento.";
  }
}

loadHollowSoulStats();
</script>

</body>
</html>
